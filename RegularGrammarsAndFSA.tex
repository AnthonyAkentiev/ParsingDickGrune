\chapter{Регулярные грамматики и конечные автоматы}

Самой простой формой среди грамматик, способных создавать тексты (бесконечной длины),
являются регулярные грамматики. С их помощью можно описать соединение строк,
повторение и выбор между альтернативами, но нельзя описать вложенные структуры.
Регулярные грамматики изучены лучше всех других частей формальной лингвистики
и почти любой вопрос про них имеет ответ.

\section{Области применения регулярных грамматик}

Существует множество разнообразных применений регулярных грамматик, несмотря на их
простоту. Ниже мы перечислим наиболее важные из них.

\subsection{КС разбор}

Некоторая часть КС грамматики может быть распознана, как регулярная грамматика,
и для нее можно создать упрощенный разборщик. Такой разборщик получается из
следующего рассмотрения. Если посмотреть на сентенциальную форму в выводах справа
(или слева), то окажется, что она состоит из завершенной (закрытой) части, в которой
находятся только терминалы, и незавершенной (открытой) части, в которой присутствуют и
терминалы и нетерминалы. В выводе слева открытая часть начинается с самого левого
нетерминала и продолжается вправо, в выводе справа - с самого правого нетерминала
и распространяется влево. См. на рисунок~\ref{openLeftRightMostProd}, на котором
показана сентенциальная форма из~\ref{TheCFCaseSubsection}.

\begin{figure}[h]\label{openLeftRightMostProd}
\begin{center}
d, N N
\end{center}
\caption{Открытые части в выводах слева и справа}
\end{figure}

Можно доказать (и довольно легко), что открытые части могут быть описаны регулярной
грамматикой, которая выводится из КС грамматики. Более того, открытые части сентенциальной
формы играют важную роль в некоторых методах разбора КС грамматик, что и объясняет
важность регулярных грамматик в процессе КС разбора.

\subsection{Системы с ограниченной памятью}

Поскольку КС (или более сильные) грамматики позволяют вложенные конструкции и поскольку
глубина вложения может быть произвольной большой, создание КС (или более сильных)
предложений может, в принципе, потребовать произвольного объема памяти для хранения
информации о еще не оконченных вложениях. Механические системы
не имеют произвольного
объема памяти и, соответственно, не могут себе позволить поведение настоящих КС-систем.
Поэтому их поведение ограничено регулярными выражениями. Это легко проверить на
примере простых механических систем наподобие торговых автоматов, светофоров и
видеомагнитофонов - все они действуют в соответствии с регулярной грамматикой.
Это же, в принципе относится и к более сложным системам, например, к системе железных
дорог страны или к компьютерам. Здесь, однако, граница размывается, поскольку
информация о вложенности может быть представлена в очень экономном виде и занимать
очень мало памяти. Соответственно, несмотря на принципиальную регулярность, поведение
этих систем проще описывать с помощью КС-грамматик, хоть это и некорректно из-за приписывания
им бесконечной памяти.

С другой стороны, общее поведение системы с большим объемом памяти все равно может быть
описано с помощью регулярной грамматики и многие КС-грамматики в большей своей части
регулярны. Это связано с тем, что регулярные грамматики предоставляют достаточно средств
для описания соединения выражений, повторения и выбора, вся роль КС-части сводится к
описанию вложенности. Если мы назовем правило, что порождает регулярный (под)язык "квазирегулярным,"
то мы можем увидеть следующее: если все альтернативы правила содержат только терминалы,
то это правило квазирегулярно (выбор). Если все альтернативы правила содержат
либо терминалы, либо квазирегулярные нетерминалы, то это правило снова квазирегулярно (соединение).
И если правило рекурсивно и рекурсия появляется только в завершающем терминале
этого правила, то такое правило также квазирегулярно (повторение). Такие правила
часто занимают значительную часть КС-грамматики. В [Krzemien and Lukasiewicz FS 1976] описан
алгоритм для определения всех квазирегулярных правил в грамматике.

Естественные языки хороший тому пример. Несмотря на то, что КС- или более сильные грамматики
необходимы для определения множества правильных предложений (и только с их
помощью можно выразить некоторые тонкие свойства), очень хорошее описание можно
получить с помощью регулярных грамматик. Рассмотрим~\ref{NonObvQuasiRegularGramm}

\begin{table}\label{NonObvQuasiRegularGramm}
\begin{tabular}{rcl}
\GrT{Предложение}&->&\GrT{Подлежащее Глагол Дополнение}\\
\GrT{Подлежащее}&\GrT{->}&\GrT{Прилагательное* Существительное}\\
\GrT{Дополнение}&\GrT{->}&\GrT{Прилагательное* Существительное}\\
\GrT{Глагол}&\GrT{->}&\GrT{ходил | хожу | ходит | ...}\\
\GrT{Прилагательное}&\GrT{->}&\GrT{хороший | хорошая | плохой | плохая | ...}\\
\GrT{Существительное}&\GrT{->}&\GrT{мячик | коробка | ...}
\end{tabular}
\caption{Квазирегулярная грамматика}
\end{table}

\begin{table}\label{RegularGrammInStdForm}
\begin{tabular}{rcl}
\GrT{Предложение}&->&\GrT{Подлежащее-Глагол-Дополнение}\\
\GrT{Подлежащее-Глагол-Дополнение}&\GrT{->}&\GrT{Существительное Глагол-Дополнение}\\
\GrT{Подлежащее-Глагол-Дополнение}&\GrT{->}&\GrT{Прилагательное Подлежащее-Глагол-Дополнение}\\
\GrT{Глагол-Дополнение}&\GrT{->}&\GrT{Глагол Дополнение}\\
\GrT{Дополнение}&\GrT{->}&\GrT{Существительное}\\
\GrT{Дополнение}&\GrT{->}&\GrT{Прилагательное Дополнение}\\
\GrT{Глагол}&\GrT{->}&\GrT{гл1 | гл2 | ...}\\
\GrT{Прилагательное}&\GrT{->}&\GrT{пр1 | пр2 ...}\\
\GrT{Существительное}&\GrT{->}&\GrT{сущ1 | сущ2 ...}
\end{tabular}
\caption{Квазирегулярная грамматика в стандартном виде}
\end{table}

Эта грамматика квазирегулярна. Правила \GrT{Существительное}, \GrT{Прилагательное} и \GrT{Глагол} квазирегулярны сами по себе.
Правила \GrT{Подлежащее} и \GrT{Дополнение} представляют из себя соединения повторений
квазирегулярных правил и, соответственно, квазирегулярны. То же самое относится и к \GrT{Предложение}.
Требуется некоторая работа для приведения этой грамматики к регулярному виду, но это
можно успешно сделать, что и продемонстрировано на \ref{RegularGrammInStdForm}, где
списки глаголов, прилагательных и существительных сокращены до \GrT{глагол},
\GrT{прилагательное} и \GrT{существительное} для экономии места. Даже может быть
добавлена некоторая (конечная) зависимость от контекста: для языков, в которых число глагола
должно совпадать с числом существительного мы повторим первое правило дважды - см.~\ref{DupMainClause}, -
и соответствующим образом продублируем оставшуюся часть грамматики. Результат останется
регулярным. Вложенные предложения могут составить проблему, но на практике глубина
вложений весьма ограничена. В английском языке предложение, содержащее подпредложение,
которое содержит подпредложение, которое содержит подпредложение, поставит читателя
в тупик и даже в голландском или немецком языках вложенность больше пяти неодобряется.
Мы развернем грамматику необходимое количество раз и уберем возможность рекурсии с
самого нижнего уровня. Тогда самый нижний уровень станет регулярным, что сделает
регулярными и все уровни выше. Полученная грамматика будет большой, но регулярной, и мы
сможем воспользоваться всеми простыми и эффективными приемами, известными для регулярных
грамматик. Требуемые разворачивания и преобразования тривиальны и могут быть
произведены программно. \cite{Dewar, Bratley & Thorne, NatLang 1969} описывают
ранние примеры такого подхода. В \cite{Blank, Natlang 1989} даны результаты недавней
попытки.

\begin{table}\label{DupMainClause}
\begin{tabular}{rcl}
\GrT{Предложение}&->&\GrT{Подл.-Глагол-Доп.-ед-число}\\
\GrT{Предложение}&->&\GrT{Подл.-Глагол-Доп.-мн-число}\\
\GrT{Подл.-Глагол-Доп.-ед-число}&\GrT{->}&\GrT{Сущ.-ед-число Глагол-Доп.-ед-число}\\
&...&\\
\GrT{Подл.-Глагол-Доп.-мн-число}&\GrT{->}&\GrT{Прил.-мн-число Подл.-Глагол-Доп.-мн-число}\\
\end{tabular}
\caption{Внесение зависимости от конекста}
\end{table}

